<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Anime clicker</title>
    <link rel="icon" type="image/png" href="icon.png">
    <style>
        body { user-select: none; -webkit-user-select: none; touch-action: manipulation; margin: 0; padding: 0; font-family: sans-serif; background-color: #f8f9fa; }
        h1 { text-align: center; font-size: 24px; }
        img { border: 2px solid rgba(0, 0, 0, 0); max-width: 100%; height: auto; max-height: 120px; }
        #innpakning { margin: auto; max-width: 1000px; width: 100%; box-sizing: border-box; background-color: white; padding-bottom: 50px; }
        .counter { margin: 15px auto; padding: 5px; text-align: center; font-size: 28px; font-weight: bold; }
        .flexbox { display: flex; justify-content: space-around; flex-wrap: wrap; padding: 5px; }
        .item { flex-grow: 1; flex-basis: 15%; margin: 5px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .wrap { text-align: center; padding: 10px; }
        .red { background-color: red !important; color: white !important; }
        p { margin: 10px 0; font-weight: bold; }
        .cost, .swordCost { color: white; text-shadow: 1px 1px 3px rgba(0,0,0,0.8); }
        .power { color: #1976d2; }
        button { padding: 12px 15px; margin: 5px; font-size: 16px; border: none; border-radius: 6px; background-color: #e0e0e0; box-shadow: 0 2px 4px rgba(0,0,0,0.2); cursor: pointer; width: 90%; font-weight: bold; }
        button:active { transform: scale(0.95); box-shadow: none; }
        .slash { margin-bottom: 20px; font-size: 24px; background-color: lightgray; color: black; padding: 15px 30px; width: 80%; max-width: 300px; }
        .save, .load { width: 40%; max-width: 150px; background-color: lightgray; color: black; }
        .swordBackground { background-color: #e0e0e0; border: 2px solid #9e9e9e;}
        .aquaBackground { background-color: #b2ebf2; border: 2px solid #00bcd4;}
        .meguminBackground { background-color: #ffcdd2; border: 2px solid #f44336;}
        .darknessBackground { background-color: #c8e6c9; border: 2px solid #4caf50;}
        .wizBackground { background-color: #e1bee7; border: 2px solid #9c27b0;}
        .bought { border: 3px solid gold; border-radius: 5px; }
        .break { flex-basis: 100%; border-top: 2px solid black; background-color: darkcyan; color: white; margin-top: 20px; border-radius: 8px; }
        .seasonButton { margin: 20px auto; font-size: 22px; background-color: #ffeb3b; color: black; padding: 20px; display: block; }
        .counterDiv { margin: auto; position: fixed; width: 100%; top: 0; left: 0; z-index: 100; transition: all 0.5s; }
        .fixingDiv { margin: 0 auto; max-width: 1000px; background-color: rgba(255, 255, 255, 0.95); border-bottom: 2px solid #ccc; box-shadow: 0 4px 6px rgba(0,0,0,0.1); padding-bottom: 10px; }
        .hide { opacity: 0; top: -100%; }
        .show { opacity: 1; top: 0; }
        @media (max-width: 600px) { .item { flex-basis: 45%; margin: 2%; } .slash { width: 90%; } button { padding: 10px 5px; font-size: 14px; } .seasonButton { font-size: 18px; } }
    </style>
</head>
<body>
    <div id="innpakning">
        <div class="counterDiv hide">
            <div class="fixingDiv">
                <p class="counter">0</p>
                <div class="wrap"><button class="slash">Slash</button></div>
            </div>
        </div>
        <div style="text-align: center; padding-top: 10px;">
            <p class="counter">0</p>
            <div class="wrap"><button class="slash">Slash</button></div>
            <button class="save">Save</button><button class="load">Load</button>
        </div>
        <div class="flexbox" id="heroesGrid">
            <div class="item swordBackground"><div class="wrap"><p>Sword</p><img src="sword.png"><p class="swordCost">Cost: 20</p><button class="swordButton">Upgrade</button><p class="power">Power: 1</p></div></div>
            <div class="item aquaBackground"><div class="wrap"><p>Aqua</p><img src="aqua.png" class="heroPic aqua"><p class="cost aqua">Cost: 10</p><button class="heroButton aqua">Buy Aqua</button><p class="lvl aqua">Lvl: 0</p></div></div>
            <div class="item meguminBackground"><div class="wrap"><p>Megumin</p><img src="megumin.png" class="heroPic megumin"><p class="cost megumin">Cost: 50</p><button class="heroButton megumin">Buy Megumin</button><p class="lvl megumin">Lvl: 0</p></div></div>
            <div class="item darknessBackground"><div class="wrap"><p>Darkness</p><img src="darkness.png" class="heroPic darkness"><p class="cost darkness">Cost: 100</p><button class="heroButton darkness">Buy Darkness</button><p class="lvl darkness">Lvl: 0</p></div></div>
            <div class="item wizBackground"><div class="wrap"><p>Wiz</p><img src="wiz.png" class="heroPic wiz"><p class="cost wiz">Cost: 200</p><button class="heroButton wiz">Buy Wiz</button><p class="lvl wiz">Lvl: 0</p></div></div>
        </div>
    </div>
    <script>
        var getCounter = document.querySelectorAll(".counter"), getSlash = document.querySelectorAll(".slash"), getSwordUpgrade = document.querySelector(".swordButton"), getSwordInfo = document.querySelector(".power"), getSwordCost = document.querySelector(".swordCost"), getFlexboxDiv = document.getElementById("heroesGrid"), myID = document.querySelector(".counterDiv");
        var myScrollFunc = function() { var y = window.scrollY; myID.className = y >= 150 ? "counterDiv show" : "counterDiv hide"; };
        window.addEventListener("scroll", myScrollFunc);
        getSlash[0].onclick = slash; getSlash[1].onclick = slash; getSwordUpgrade.onclick = upgradeSlash;

        var poeng = 0, removeSeason = 0, cheatCount = 0, firstClickTime = 0, idleTimer, newSeasonCost = 5000;
        class Hero { constructor(name, cost, lvl, power) { this.name = name; this.cost = cost; this.lvl = lvl; this.power = power; } }
        var swordClassic = new Hero("sword", 20, 0, 1);
        var heroClassic = [new Hero("aqua", 10, 0, 1), new Hero("megumin", 50, 0, 3), new Hero("darkness", 100, 0, 8), new Hero("wiz", 200, 0, 15)]; 
        
        var seasonName = ["Konosuba Season 2", "Re: Zero", "Monster Musume", "Little Witch Academia", "To Love Ru", "Tokidoki Bosotto Russia-go de Dereru Tonari no Alya san"]; 
        var heroesSeasonName = [["yunyun", "luna", "eris", "komekko"], ["emilia", "ram", "rem", "beatrice", "pack", "felix"], ["miia", "rachnera", "suu", "papi", "centorea", "meroune", "lala", "zombina", "tionishia", "manako"], ["akko", "sucy", "diana", "lotte", "amanda"], ["lala_Deviluke", "haruna", "yami", "yui", "mikan", "run"], ["alya", "masha", "yuki"]];
        var heroesSeasonAr = [];
        var costNewHero = 200;

        for (var i = 0; i < heroesSeasonName.length; i++) {
            heroesSeasonAr.push([]);
            for (var k = 0; k < heroesSeasonName[i].length; k++) {
                costNewHero = Math.floor(costNewHero * 3.5);
                let powerNewHero = Math.floor(costNewHero * 0.1); 
                heroesSeasonAr[i].push(new Hero(heroesSeasonName[i][k], costNewHero, 0, powerNewHero));
            }
        }

        function createSeasonButton() {
            let oldBtn = document.getElementById("seasonBtnContainer");
            if (oldBtn) oldBtn.remove();
            
            if (removeSeason < heroesSeasonAr.length) {
                let btnDiv = document.createElement("div");
                btnDiv.id = "seasonBtnContainer";
                btnDiv.classList.add("break", "wrap", "dynamic-season");
                let cB = document.createElement("button");
                cB.classList.add("seasonButton");
                cB.innerHTML = "Unlock " + seasonName[removeSeason] + "<br>Cost: " + simpleNumber(newSeasonCost);
                cB.onclick = addHeroes;
                btnDiv.appendChild(cB);
                getFlexboxDiv.appendChild(btnDiv);
            } else {
                let finalBanner = document.createElement("div");
                finalBanner.classList.add("break", "wrap", "dynamic-season");
                finalBanner.innerHTML = "<h1>Thank you for playing! All levels unlocked!</h1>";
                getFlexboxDiv.appendChild(finalBanner);
            }
        }
        createSeasonButton();

        function addHeroes() {
            if (poeng >= newSeasonCost) {
                poeng -= newSeasonCost; 
                
                let oldBtn = document.getElementById("seasonBtnContainer");
                if (oldBtn) oldBtn.remove();

                let banner = document.createElement("div");
                banner.classList.add("break", "wrap", "dynamic-season");
                banner.innerHTML = "<h1>" + seasonName[removeSeason] + "</h1>";
                getFlexboxDiv.appendChild(banner);

                for (var i = 0; i < heroesSeasonAr[removeSeason].length; i++) {
                    var h = heroesSeasonAr[removeSeason][i]; 
                    heroClassic.push(h); 
                    var nD = document.createElement("div"); 
                    nD.classList.add("item", "dynamic-season"); 
                    nD.style.border = "2px solid #555";
                    if(h.name === "alya") nD.style.backgroundColor = "#f5f5dc"; 
                    else if(h.name === "masha") nD.style.backgroundColor = "#ffcc80"; 
                    else if(h.name === "yuki") nD.style.backgroundColor = "#8b4513"; 
                    else nD.style.backgroundColor = "hsl(" + Math.floor(Math.random() * 359 + 1) + ", 60%, 80%)";
                    
                    nD.innerHTML = `<div class="wrap"><p>${h.name.toUpperCase()}</p><img src="${h.name}.png" class="heroPic ${h.name}"><p class="cost ${h.name}">Cost: 0</p><button class="heroButton ${h.name}">Buy ${h.name}</button><p class="lvl ${h.name}">Lvl: 0</p></div>`;
                    getFlexboxDiv.appendChild(nD);
                }
                
                removeSeason++; 
                
                if (removeSeason < heroesSeasonAr.length) {
                    newSeasonCost = Math.floor(heroesSeasonAr[removeSeason][0].cost * 2);
                }
                
                createSeasonButton();
                document.querySelectorAll(".heroButton").forEach(b => b.onclick = buy);
                updateDisplay();
            } else flashRed(document.querySelector(".seasonButton"));
        }

        function slash() { poeng += swordClassic.power; updateDisplay(); }
        function upgradeSlash() {
            if (poeng >= swordClassic.cost) {
                poeng -= swordClassic.cost;
                swordClassic.power = Math.floor(swordClassic.power * 1.5) + 1;
                swordClassic.cost = Math.floor(swordClassic.cost * 1.8); updateDisplay();
            } else flashRed(getSwordUpgrade);
        }
        function buy() {
            for (var i = 0; i < heroClassic.length; i++) {
                if (this.classList.contains(heroClassic[i].name)) {
                    if (poeng >= heroClassic[i].cost) {
                        heroClassic[i].lvl++; 
                        poeng -= heroClassic[i].cost; 
                        heroClassic[i].cost = Math.floor(heroClassic[i].cost * 1.25); 
                        updateDisplay();
                    } else flashRed(this);
                    break;
                }
            }
        }
        function flashRed(e) { e.classList.add("red"); setTimeout(() => e.classList.remove("red"), 100); }
        function updateDisplay() {
            let p = Math.floor(poeng);
            getCounter[0].innerHTML = simpleNumber(p); getCounter[1].innerHTML = simpleNumber(p);
            getSwordCost.innerHTML = "Cost: " + simpleNumber(swordClassic.cost); getSwordInfo.innerHTML = "Power: " + simpleNumber(swordClassic.power);
            
            heroClassic.forEach(h => {
                let l = document.querySelector(".lvl." + h.name);
                let c = document.querySelector(".cost." + h.name);
                let pc = document.querySelector(".heroPic." + h.name);
                let b = document.querySelector(".heroButton." + h.name);
                
                if (l) l.innerHTML = "Lvl: " + h.lvl;
                if (c) c.innerHTML = "Cost: " + simpleNumber(h.cost);
                if (h.lvl > 0) { 
                    if(pc) pc.classList.add("bought"); 
                    if(b) b.innerHTML = "Lvl up"; 
                }
            });
        }
        function toFixed(x) {
            let e = parseInt(x.toString().split('+')[1]);
            if (e > 20) { e -= 20; x /= Math.pow(10, e); x += (new Array(e + 1)).join('0'); }
            return x;
        }
        function simpleNumber(c) {
            c = Math.floor(c);
            if (c < 1000) return c.toString();
            let v = c > 1e21 ? toFixed(c) : c.toString(), lA = ["K", "M", "B", "T", " Qa", " Qi", " Sx", " Sp", " Oc", " No", " De", " Ud", " Dd", " Td"], lAI = Math.floor((v.length - 1) / 3) - 1;
            let res = (c / Math.pow(10, (lAI + 1) * 3)).toFixed(2);
            return res + lA[lAI];
        }

        setInterval(() => {
            let inc = 0; heroClassic.forEach(h => { if(h.lvl > 0) inc += h.lvl * h.power; });
            if(inc > 0) { poeng += (inc / 20); updateDisplay(); } 
        }, 50);

        document.querySelectorAll(".heroButton").forEach(b => b.onclick = buy);

        document.querySelector(".save").onclick = () => {
            localStorage.setItem("heroArray", JSON.stringify(heroClassic));
            localStorage.setItem("swordClassic", JSON.stringify(swordClassic));
            localStorage.setItem("poeng", poeng);
            localStorage.setItem("rS", removeSeason);
            alert("Saved!");
        };
        
        document.querySelector(".load").onclick = () => {
            let now = Date.now();
            clearTimeout(idleTimer);
            idleTimer = setTimeout(() => { cheatCount = 0; }, 10000);
            if (cheatCount === 0) firstClickTime = now;
            cheatCount++;
            if (now - firstClickTime > 5000) { cheatCount = 1; firstClickTime = now; }
            if (cheatCount === 3) {
                poeng += 1e40; updateDisplay(); alert("ULTRA CHEAT!");
            } else if (cheatCount === 4) {
                poeng = 0; updateDisplay(); alert("RESET!"); cheatCount = 0;
            } else {
                if(localStorage.getItem("heroArray")){
                    heroClassic = JSON.parse(localStorage.getItem("heroArray"));
                    swordClassic = JSON.parse(localStorage.getItem("swordClassic"));
                    poeng = Number(localStorage.getItem("poeng"));
                    let savedRS = Number(localStorage.getItem("rS"));
                    
                    document.querySelectorAll(".dynamic-season").forEach(e => e.remove());
                    
                    for(let r = 0; r < savedRS; r++) {
                        let cD = document.createElement("div"); 
                        cD.classList.add("break", "wrap", "dynamic-season"); 
                        cD.innerHTML = "<h1>" + seasonName[r] + "</h1>";
                        getFlexboxDiv.appendChild(cD);
                        
                        for (let i = 0; i < heroesSeasonAr[r].length; i++) {
                            let h = heroesSeasonAr[r][i];
                            let nD = document.createElement("div"); 
                            nD.classList.add("item", "dynamic-season"); 
                            nD.style.border = "2px solid #555";
                            if(h.name === "alya") nD.style.backgroundColor = "#f5f5dc"; 
                            else if(h.name === "masha") nD.style.backgroundColor = "#ffcc80"; 
                            else if(h.name === "yuki") nD.style.backgroundColor = "#8b4513"; 
                            else nD.style.backgroundColor = "hsl(" + Math.floor(Math.random() * 359 + 1) + ", 60%, 80%)";
                            
                            nD.innerHTML = `<div class="wrap"><p>${h.name.toUpperCase()}</p><img src="${h.name}.png" class="heroPic ${h.name}"><p class="cost ${h.name}">Cost: 0</p><button class="heroButton ${h.name}">Buy ${h.name}</button><p class="lvl ${h.name}">Lvl: 0</p></div>`;
                            getFlexboxDiv.appendChild(nD);
                        }
                    }
                    
                    removeSeason = savedRS;
                    
                    if (removeSeason === 0) {
                        newSeasonCost = 5000;
                    } else if (removeSeason < heroesSeasonAr.length) {
                        newSeasonCost = Math.floor(heroesSeasonAr[removeSeason][0].cost * 2);
                    }
                    
                    createSeasonButton(); 
                    document.querySelectorAll(".heroButton").forEach(b => b.onclick = buy); 
                    updateDisplay(); 
                    alert("Loaded!");
                }
            }
        };
    </script>
</body>
</html>